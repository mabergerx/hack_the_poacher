#!/usr/bin/env bash
OLD_PYTHON=`command -v python`
VENV_PATH=`pwd`/.venv/

if [ ! -d "$VENV_PATH" ]; then
   virtualenv -p python3 $VENV_PATH
fi

echo "Activating virtual env...."
source $VENV_PATH/bin/activate
NEW_PYTHON=`command -v python`

echo "Installing requirements...."
# export PIP_CONFIG_FILE=$(pwd)/pip.conf 
# pip install -r requirements.txt 

if [ "$OLD_PYTHON" != "$NEW_PYTHON" ]; then
   echo "Virtualenv changed"
   echo "  from $OLD_PYTHON"
   echo "  to   $NEW_PYTHON"
fi

echo "Done..."